/*!

Implementation of the classical OOP inheritance

Copyright 2013, Ildar Shaimordanov

This implementation was inspired by the Dmitirii's work. 
It was completely re-written at the very beginning and has 
only common things with the original work: 
a) the naming convention of the base functions and 
b) the same behaviour of functions used further. 
Follow by these links below to learn more about his original work
https://github.com/devote/jsClasses
http://javascript.ru/forum/168029-post1.html

This work is a part of the Object.js file that is totally hosted at 
http://code.google.com/p/jsxt/source/browse/trunk/js/Object.js

*/(function(){if(Object.keys){return;}var hasOwnProperty=Object.prototype.hasOwnProperty;var hasDontEnumBug=!({toString:null}).propertyIsEnumerable('toString');var dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'];var dontEnumsLength=dontEnums.length;Object.keys=function(obj){if(typeof obj!=='object'&&typeof obj!=='function'||obj===null){throw new TypeError('Object.keys called on non-object');}var result=[];for(var prop in obj){if(!hasOwnProperty.call(obj,prop)){continue;}result.push(prop);}if(hasDontEnumBug){for(var i=0;i<dontEnumsLength;i++){if(!hasOwnProperty.call(obj,dontEnums[i])){continue;}result.push(dontEnums[i]);}}return result;};})();if(!Object.create){Object.create=function(proto){var F=function(){};F.prototype=proto;return new F();};}Object.mixin=function(dst,src,func){func=func||function(dst,src,prop){dst[prop]=src[prop];};var props=Object.keys(src);for(var i=0;i<props.length;i++){var prop=props[i];if(!src.hasOwnProperty(prop)){continue;}func(dst,src,prop);}return dst;};var Class=(function(){var _wrapParent=function(dst,src,prop){if(typeof dst[prop]!='function'||typeof src[prop]!='function'){dst[prop]=src[prop];return;}dst[prop]=src[prop]=(function(parentMethod,method){return function(){var parent=this.parent;this.parent=parentMethod;var result=method.apply(this,arguments);this.parent=parent;return result;};})(dst[prop],src[prop]);};var F=function(){};var Class=function(Parent,proto){if(arguments.length<2){proto=arguments[0];Parent=null;}Parent=Parent||Object;proto=proto||{};if(typeof proto!='function'){proto=(function(proto){return function(){return proto;};})(proto);}var _instanceOf=function(Class){var p=Child;while(p){if(p===Class){return true;}p=p.Parent;}return false;};var Child=function(){var object=proto();delete object.parent;delete object.instanceOf;object.constructor=object.constructor||function(){Parent.apply(this,arguments);};var parent=Object(Parent.call(new F()));Object.mixin(this,parent);Object.mixin(this,object,_wrapParent);this.instanceOf=_instanceOf;if(this instanceof F){return this;}object.constructor.apply(this,arguments);};Child.Parent=Parent;return Child;};return Class;})();
